{:applications {:emacs ["^org\\.gnu\\.Emacs$"]
                :kitty ["^net\\.kovidgoyal\\.kitty$"]
                :C-m-apps ["^com\\.google\\.Chrome$"
                           "^com\\.microsoft\\.VSCode$"]
                :emacs-emulation-apps ["^com\\.tinyspeck\\.slackmacgap$"
                                       "^notion\\.id"$]}
 :main [{:des "swap caps lock to left control"
         :rules [[:##caps_lock :left_control]
                 [:##left_control :caps_lock]]}
        {:des "C-m to return in more places"
         :rules [[:!Tm :return_or_enter [:C-m-apps]]]}
        {:des "' to right control when held"
         :rules [[:#COQEquote
                  :right_control
                  nil
                  {:alone {:key :quote :halt true}
                   :delayed {:invoked [["force-right-control" 1]]}
                   :afterup [["force-right-control" 0]]
                   :params {:alone 300 :delay 301}}]
                 ; Activate a prefix map so the below exclusions don't take effect
                 [:!Wx [:!Wx ["force-right-control" 1]]]
                 [:!Wc [:!Wc ["force-right-control" 1]]]
                 [:!Wh [:!Wh ["force-right-control" 1]]]
                 [:!Wo [:!Wo ["force-right-control" 1]]]
                 ; Exclude letters that commonly appear with apostrophes if a prefix
                 ; map isn't activated
                 [:!Wd [:quote :d] :!force-right-control]    ; she's
                 [:!Wf [:quote :f] :!force-right-control]    ; hasn't
                 [:!Wg [:quote :g] :!force-right-control]    ; he'd
                 [:!Wm [:quote :m] :!force-right-control]    ; I'm
                 [:!Ws [:quote :s] :!force-right-control]    ; you're
                 [:!Wu [:quote :u] :!force-right-control]    ; we'll
                 [:!Wv [:quote :v] :!force-right-control]]}  ; they've
        {:des "Emacs emulation apps"
         :rules [:emacs-emulation-apps
                 [:!Tm :return_or_enter]
                 [:!Tr :up_arrow]
                 [:!Tj :down_arrow]
                 [:!Tt :escape]]}
         {:des "launch mode"
          :rules [[{:sim [:comma :period]
                    :simo {:interrupt true
                           :dorder :insensitive
                           :uorder :insensitive
                           :afterup {:set ["launch-mode" 0]}}}
                    ["launch-mode" 1]]
                  [:condi :launch-mode]
                  [:a "open -b com.apple.ActivityMonitor"]
                  [:c "open -b com.google.Chrome"]
                  [:d "open -b com.tinyspeck.slackmacgap"]
                  [:e "open -b org.gnu.Emacs"]
                  [:f "open -b net.kovidgoyal.kitty"]
                  [:m "open -b com.spotify.client"]
                  [:v "open -b com.apple.finder"]
                  [:w "open -b com.apple.iCal"]]}]}
